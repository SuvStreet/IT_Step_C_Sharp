> **Материал взят с методички по курсу "Платформа Microsoft.NET и язык программирования С#". Учебное заведение "Компьютерная Академия Шаг".**

1 Введение в платформу Microsoft .NET
===

### История и этапы развития технологий программирования

Первым языком семейства "C" был язык программирования **`"С"`**, разработанный Дэнисом Ритчи в 1970-х годах. До языка «С» программирование в основном было императивным, что вызывало сложности при увеличении «размера» («масштабы») программных проектов.

Следующим этапом развития семейства языков «С» стал язык **`«С++»`**, разработанный Бьярном Страуструпом в 1979-ом году, который реализовывал парадигму объектно-ориентированного подхода в программировании. Тесное родство «С++» и «С» обеспечило популярность новому языку программирования, поскольку «С»-программисту не нужно было изучать новый язык программирования, достаточно было освоить «новые» объектно-ориентированные возможности и без того удачного языка.

Но время предъявило новые требования в области разработки программного обеспечения. Они заключались в том, что у конечного потребителя возникала необходимость в межплатформенной переносимости программного обеспечения, упрощения передачи проектов по сетям коммуникации, а так же в уменьшении времени, которое затрачивается на разработку программного обеспечения.

В 1991 году компания Sun Microsystems предложила решение этой проблемы на базе своего нового языка «Oak» (англ. Дуб), который впоследствии стал называться **`«Java»`**. Авторство этого языка приписывают Джеймсу Гослингу. 

Язык **`C#`** появился в 2000 году и стал основой новой стратегии развития компании Microsoft. Главным архитектором этого языка является Андерс Хейлсберг (он же в 1980-х годах был автором Turbo Pascal).

C# стал потомком языков C, C++ и Java. Можно даже сказать, что он стал их эволюционным продолжением, объединив в себе основные преимущества и доработав положительные стороны описанных языков.

2 Базовые понятия платформы Microsoft .NET
===

### Архитектура платформы Microsoft .NET

Платформа .NET базируется на двух основных компонентах: **Common Language Runtime и .NET Framework Class Library**.

**`CLR (Common Language Runtime`**, общеязыковая среда исполнения) — является основой, исполняющей приложения .NET, обычно написанные на **`CIL (Common Intermediate Language`** — общий промежуточный язык).

**`.NET Framework Class Library (FCL)`** — универсальный набор классов, для использования в разработке программ, так же называют **`BCL (англ. Base Class Library`** — Библиотека Базовых Классов).

CLR является одной из реализаций спецификации общеязыковой инфраструктуры (**`Common Language Infrastructure, сокращенно CLI`**).

CLI — это международная спецификация, которая позиционирует идеологию языков программирования с интегрированной средой исполнения. Основной идеей является то, что приложение, имеющее составные модули, созданные на различных высокоуровневых языках программирования, переводятся не в исполняемый машинный код, а в некоторый промежуточный код.

Основными составляющими CLI являются:
* **Общая система типов (Common Type System, CTS)** - обеспечивает кросс-языковое взаимодействие в рамках среды .NET
* **Виртуальная система исполнения (Virtual Execution System, VES)** — обеспечивает загрузку и выполнение программ, написанных для CLI
* **Система метаданных (Metadata System)** — служит для описания типов, используется для передачи типовой информации между различными инструментами
* **Общий промежуточный язык (Common Intermediate Language, CIL)** — независимый от конкретной платформы байт-код, который выступает в роли целевого языка для любого CLI-совместимого компилятора
* **Общая спецификация языков (Common Language Specification, CLS)** — набор соглашений между разработчиками языков программирования и разработчиками библиотек классов, в которых определено подмножество CTS и набор правил, направленных на обеспечение взаимодействия программ и библиотек, написанных на различных СLI-совместимых языках

FCL включает в себя следующие пространства имён (Namespaces):
* **System** — Это пространство имён включает базовые типы, такие как String, DateTime, Boolean, и другие. Обеспечивает необходимым набором инструментов для работы с консолью, математическими функциями, и базовыми классами для атрибутов, исключений и массивов
* **System.CodeDom** — Обеспечивает возможность создавать код и запускать его
* **System.Collections** — Определяет множество общих контейнеров или коллекций, используемых в программировании — такие как список, очередь, стек, хеш-таблица и некоторые другиеܳ Также включена поддержка обобщений (Generics)
* **System.ComponentModel** — Обеспечивает возможность реализовывать поведение компонентов во время выполнения и во время дизайна. Содержит инфраструктуру для реализации универсальных переносимых компонентов
* **System.Configuration** — Содержит компоненты для управления конфигурационными данными
* **System.Data** — Это пространство имён представляет архитектуру ADO.NET, являющуюся набором программных компонентов, которые могут быть использованы для доступа к данным и для обслуживания данных
* **System.Deployment** — Позволяет настроить способ обновления и распространения приложения с использованием технологии ClickOnce
* **System.Diagnostics** — Предоставляет возможность диа-гностировать разрабатываемое приложение. Включает журнал событий, счётчики производительности, трассировку и взаимодействие с системными процессами
* **System.DirectoryServices** — Обеспечивает лёгкий доступ к Active Directory из управляемого кода
* **System.Drawing** — Предоставляет доступ к GDI+, включая поддержку для двухмерной растровой и векторной графики, изображений, печати и работы с текстом
* **System.Globalization** — Предоставляет помощь для написания интернационализированных приложений. Может быть определена информация, связанная с культурой, включая язык, страну/регион, календарь, шаблоны формата даты, валюты и цифр
* **System.IO** — Позволяет осуществлять считывание и запись в различные потоки, такие как файлы и другие потоки данных. Также обеспечивает взаимодействие с файловой системой
* **System.Management** — Предоставляет средства для запроса информации, такой как количество свободного места на диске, информации о процессоре, к какой базе данных подключено определённое приложение, и многое другое
* **System.Media**  — Позволяет проигрывать системные звуки и файлы мультимедиа
* **System.Messaging**  — Позволяет отображать и  управ-лять очередью сообщений в сети, а также отсылать, принимать и просматривать сообщения. Другое имя для некоторых предоставленных возможностей — .Net Remoting. Это пространство имён заменено Windows Communication Foundation
* **System.Net** — Предоставляет интерфейс для многих протоколов, используемых в сетях в настоящее время, таких как HTTP, FTP, и SMTP. Безопасность общения поддерживается протоколами наподобие SSL
* **System.Linq** — Определяет интерфейс `IQueryable<T>` и связанные с ним методы, которые позволяют подключать провайдеры LINQ
* **System.Linq.Expressions** — Позволяет делегатам и лямбда-выражениям быть представленными как деревья выражений, так, что высокоуровневый код может быть просмотрен и обработан во время его выполнения
* **System.Reflection** — Обеспечивает объектное представление типов, методов и свойств (полей). Предоставляет возможность динамически создавать и вызывать типы. Открывает API для доступа к возможностям рефлексивного программирования в CLR
* **System.Resources** — Позволяет управлять различными ресурсами в приложении, используемыми, в частности, для интернационализации приложения на разных языках
* **System.Runtime** — Позволяет управлять поведением приложения или CLR во время выполнения. Некоторые из включённых возможностей взаимодействуют с COM, сериализированными объектами внутри двоичного файла или SOAP
* **System.Security** — Предоставляет функциональности внутренней системы безопасности CLR. Это пространство имён позволяет разрабатывать модули безопасности для приложений, базирующиеся на политиках и  разрешениях. Обеспечивает доступ к средствам криптографии
* **System.ServiceProcess** — Позволяет создавать приложения, запускаемые как сервисы в системе Windows
* **System.Text** — Поддерживает различные кодировки, регулярные выражения, и другие полезные механизмы для работы со строками (класс StringBuilder)
* **System.Threading** — Облегчает многопоточное программирование и синхронизацию потоков
* **System.Timers**  — Позволяет вызвать событие через определённый интервал времени
* **System.Transactions** — Обеспечивает поддержку локальных и распределённых транзакций. Кроме того, в современных версиях .NET поддерживаются следующие расширения
* **Windows Presentation Foundation** — для создания богатых пользовательских интерфейсов
* **Windows Communication Foundation** — для простого создания сетевых приложений
* **Windows Workflow Foundation** — для управления процессами выполнения
* **Windows CardSpace** — для поддержки технологии «единого входа»

При чтении литературы или посещении различных форумов Вы, наверняка, помимо аббревиатуры CIL встретите ещё два возможных варианта: **IL (Intermediate Language)**, то есть просто «промежуточный язык» или **MSIL (Microsoft Intermediate Language)** это устаревшее название, которое было изменено после выхода стандарта ECMA-335

### Схема компиляции и исполнения приложения платформы Microsoft .NET

![](https://pp.userapi.com/c845324/v845324783/80851/h-_iHYB53Go.jpg)

### Понятия метаданных, манифеста, сборки

При преобразовании программного кода приложения в промежуточный код, еще формируется и блок, так называемых **метаданных**, который содержит информацию о данных, используемых в программе.

В частности, метаданные используются для:
* **сохранения информации о типах.** При компиляции теперь не требуются заголовочные и библиотечные файлы. Всю необходимую информацию компилятор читает непосредственно из управляемых модулей;
* **верификации** (проверки) кода в процессе выполнения модуля;
* **управления динамической памятью** (освобождение памяти) в процессе выполнения модуля;
* **обеспечения динамической подсказки** (IntelliSence) при разработке программы стандартными инструментальными средствами (Microsoft Visual Studio .NET) на основе метаданных.

**Сборка** (Assembly) — базовый строительный блок приложения в .NET Framework. Сборка может быть либо исполняемым приложением (при этом она размещается в файле с расширением .exe), либо библиотечным модулем (в файле с расширением .dll).

**Манифест (Manifest)** или **Декларация сборки** — составная часть сборки. Это еще один набор таблиц метаданных, который:
* идентифицирует сборку в виде текстового имени, ее версию, культуру и цифровую сигнатуру (если сборка распределяется среди приложений);
* определяет входящие в состав файлы (по имени и хэшу);
* указывает типы и ресурсы, существующие в сборке, включая описание тех, которые экспортируются из сборки;
* перечисляет зависимости от других сборок;
* указывает набор прав, необходимых сборке для корректной работы.

3 Введение в язык программирования C#
===

### Дисциплины с использованием языка C#

* **Windows Forms** — технология создания клиентских приложений Windows;
* **Windows Presentation Foundation (WPF)** — технология создания клиентских приложений с гораздо большими возможностями и имеющими более насыщенный дизайн чем в Windows Forms;
* **ADO.NET** — технология, позволяющая работать с базами данных из приложений;
* **SP** — системное программирование, в ходе этой дисциплины изучается работа с потоками и все что с этим связано;
* **NP** — сетевое программирование — изучаются способы передачи информации по сети с использованием различных протоколов;
* **Windows Communication Foundation (WCF)** — сервис-ориентированная технология разработки приложений (создание и применение сервисов);
* **ASP.NET** — технология создания web-приложений.

### Простейшая программа на языке программирования C#

```cs
using System;

namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Введите Ваше имя");
            string name;
            name = Console.ReadLine();
            if (name == "")
                Console.WriteLine("Здравствуй, мир!");
            else
                Console.WriteLine("Здравствуй, " + name + "!");
            Console.ReadKey();
        }
    }
}
```

4 Рефлекторы и дотфускаторы
===

### Что такое рефлектор?

Использование рефлектора предоставляет возможность увидеть, как выглядит сборка после её компиляции.

### Что такое дотфускатор?

Открытый код можно защитить. Для этой цели были созданы программные продукты под общим названием дотфускаторы (dotfuscators). Название дотфускатор происходит из названия основного подхода к защите программных решений — обфускации (obfuscation) или в переводе на русский язык — запутывания.

5 Типы данных
===

Технология .NET Framework определяет две группы типов данных: значимые типы (*value-types*) и ссылочные типы (*reference-types*). Определено, что экземпляры значащих типов должны располагаться в стеке, тогда как ссылочных — в другой области оперативной памяти, называемой управляемой кучей (managed heap). Для описания значимых типов данных используются структуры. Тогда как для описания ссылочных — классы.

![](https://pp.userapi.com/c848632/v848632531/c6d2/OZ72cYg1mCc.jpg)

### Символьный тип данных

```cs
/*Описание действия метода:                     Результат:*/
//определяет является ли символ управляющим
Console.WriteLine(char.sControl('\t'));         //True
//определяет является ли символ цифрой
Console.WriteLine(char.IsDigit('5'));           //True
//определяет является ли символ бувенным
Console.WriteLine(char.IsLetter('x'));          //True
//определяет находится ли символ в нижнем регистре
Console.WriteLine(char.IsLower('m'));           //True
//определяет находится ли символ в верхнем регистре
Console.WriteLine(char.IsUpper('P'));           //True
//определяет является ли символ числом
Console.WriteLine(char.IsNumber('2'));          //True
//определяет является ли символ разделителем
Console.WriteLine(char.IsSeparator('.'));       //False
//определяет является ли символ специальным символом
Console.WriteLine(char.IsSymbol('<'));          //True
//определяет является ли символ пробелом
Console.WriteLine(char.IsWhiteSpace(' '));      //True
//переводит символ в нижний регистр
Console.WriteLine(char.ToLower('T'));           //t
//переводит символ в верхний регистр
Console.WriteLine(char.ToUpper('t'));           //T
```

6 Nullable типы
===

Nullable тип — это тип данных, который помимо значений, лежащего в его основе типа данных, может принимать еще и значение null.

```cs
double number = null; // Ошибка!
string str = null; // запись корректна
```

Чтобы объявить переменную nullable типа, необходимо добавить к имени лежащего в основе типа данных вопросительный знак. Например:

```cs
int? nullInt = null;
nullInt = 10;
bool? nullBool = true;
nullBool = null;
//string? str = null; // ошибка на этапе компиляции
```





